<div>
    <p style='text-align:center'>Sign in</p>

    <%= form_with url: sessions_sign_in_path do |form| %>

        <div class='user_sign_in_form'>

            <div class= 'user_sign_in_form_inside_content'>

                <div class= 'user_sign_in_email'>

                    <%= form.label :email, :class => 'user_sign_in_label' %>
                    <%= form.email_field :email,placeholder: 'Email',autofocus: true, :class => 'user_sign_in_field' %>
                    <b><p class='sign_in_email_error'></p></b>
                
                </div>

                <div>
                    <%= form.label :password, :class => 'user_sign_in_label' %>
                    <%= form.password_field :password,placeholder: 'Password', :class => 'user_sign_in_field' %>
                    <b><p class='sign_in_password_error'></p></b>
                </div>

                <input type='checkbox' onclick='passwdVisible()' class='sign_in_user_password_visibility_checkbox'>Show password
                    
                <br>
                <br>

                <center><button type=submit id='submit' onclick='validations()'>Sign in</button></center>
                <p class='user_sign_up_sign_in_link'>New member? <%= link_to 'Sign up', users_sign_up_path %><br></p>
                
            </div>    
            
        </div>

    <% end %>

</div>

<script>

    function passwdVisible(){
        var passwd = document.getElementById('password');
        if(passwd.type === 'password'){
            passwd.type='text';
        } 
        else {
            passwd.type = 'password';
        }
    }

    function validations() {
        var email_field = document.getElementById('email').value
        var pass_field = document.getElementById('password').value

        if (email_field == ''){
            document.getElementById('sign_in_email_error').innerHTML = 'Please enter a valid email';
        }
        else if (!email_field.match(/[a-z0-9]+@[a-z]+\.[a-z]{2,3}/)){
            document.getElementById('sign_in_email_error').innerHTML = 'Invalid email';
        }
        else{
            document.getElementById('sign_in_email_error').innerHTML = "";
        }

        if (pass_field == ''){
            document.getElementById('sign_in_password_error').innerHTML = "Please enter a valid password";
        }
        else {
            document.getElementById('sign_in_password_error').innerHTML = "";
        }
    }

</script>